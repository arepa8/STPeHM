{% extends "layout.html" %}
{% block content %}
<!--GESTION DE USUARIOs-->

<div id="cuerpoHeredado">
  <h1> Bienvenido, {{active_user.role}} {{active_user.name}}.</h1>
      <!-- Modal content -->
    {% if active_user.role == 'Administrador' %}
    <div id="myModal_user" class="modal-content">
      <div class="modal-header">
        <span class="close">×</span>
        <h2></h2>
      </div>
      <div class="modal-body">
        <p>¿Está seguro de que desea eliminar el usuario?</p>
        <button id="deleteButton_user">Eliminar</button>
        <button id="cancel_user">Cancelar</button>
      </div>
      <div class="modal-footer">
        <h3></h3>
      </div>
    </div>
    <center><h2>Gestión de Usuarios</h2></center>
    <div id="show-users"><table>
      <tr>
        <th>Cédula de Identidad</th>
        <th>Username</th>
        <th>Nombre</th> 
        <th>Apellido</th>
        <th>Correo electrónico</th>
        <th> Rol </th>
        <th></th>
      </tr>
      {% for user in users %}
        <tr id="{{user.ci}}">
          <td>{{user.ci}}</td>
          <td>{{user.username}}</td>
          <td>{{user.name}}</td>
          <td>{{user.last_name}}</td> 
          <td>{{user.email}}</td>
          <td>{{user.role}}</td>  
          <td>
            <a href="{{ url_for('modify_user', ci=user.ci) }}"><i class="fa fa-pencil" style="font-size:16px;color:black"></i></a>
            <button id="delete_user" value= "{{user.ci}}" onclick="openModal_user({{user.ci}})" name="ci"><i class="fa fa-trash" style="font-size:16px;color:black"></i></button>

          </td>
        </tr>
      {% endfor%}
    </table></div>

<!--GESTION DE ROLES-->
     <br>
     <br> 
    <center><h2>Gestión de Roles</h2></center>
    <!--AGREGAR ROL-->        
    <div class="col-xs-12 show-add-role" style="display:none;">
      <br>
      <br>
      <span>Agregar nuevo rol: </span>
      <input id="add-role-input" name="role" type="role">
      <button id = "add-role">Aceptar</button>
     <br>
     <br> 
    </div>
    <!--MODIFICAR ROL-->    
    <div class="col-xs-12 show-modify-role" style="display:none;">
      <br>
      <br>
      <span>Modificar rol: </span>
      <input id="modify-role-input" name="role" type="role">

      <button id = "modify-role-form">Aceptar</button>
     <br>
     <br> 
    </div>
    <!--ERROR ROL-->    
    <div class="col-xs-12 error-role" style="display:none;">
      <br>
      <br>
      <span id="error-role-span"></span>
     <br>
     <br> 
    </div>
    <!-- TABLA DE ROLES-->    
    <div id ="show-roles"><table>
    <tr>
      <th>Rol ID</th>
      <th>Rol</th>
      <th>Descripción</th>
      <th style="text-align: right">
         <button id="show-add-role" onclick="show_add_role()"> <i class="fa fa-plus-circle" style="font-size:20px;color:white"></i></button>
      </th>
    </tr>
    {% for role in roles %}
    <tr>
      <td>{{ role.id }}</td>
      <td>{{ role.role_name }}</td>
      <td>{{ role.role_descripcion }}</td>
      <td style="text-align: right;">
        <button id="modify-role" name="{{role.role_name}}" value="{{role.id}}" onclick="show_modify_role({{role.id}},'{{role.role_name}}')"  style="background: transparent; border: 0;padding: 0px 0px 0px 30px;">
            <i class="fa fa-pencil" style="font-size:16px;color:black"></i>
        </button>
        <button id="delete-role" value= "{{role.id}}" onclick="delete_role({{role.id}})"  style="background: transparent; border: 0;padding: 0px 0px 0px 30px;">
          <i class="fa fa-trash" style="font-size:16px;color:black"></i>
        </button></td>
    </tr>
    {% endfor %}
  </table></div>
  {% endif %}
</div>
{% endblock %}